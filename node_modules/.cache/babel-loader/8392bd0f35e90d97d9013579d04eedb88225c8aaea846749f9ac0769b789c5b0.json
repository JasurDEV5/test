{"ast":null,"code":"import React,{useState,useEffect}from'react';import CryptoJS from'crypto-js';import axios from'axios';import ProductList from'./components/ProductList';import Pagination from'./components/Pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[products,setProducts]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const getTimestamp=()=>{const currentDate=new Date();const timestamp=currentDate.toISOString().slice(0,10).replace(/-/g,'');return timestamp;};const authString=()=>{const timestamp=getTimestamp();return CryptoJS.MD5(\"Valantis_\".concat(timestamp)).toString();};const fetchProducts=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{// Fetching product IDs\nconst responseIds=await axios.post('https://api.valantis.store:41000/',{action:'get_ids',params:{offset:(page-1)*50,limit:50}},{headers:{'X-Auth':authString()}});const productIds=responseIds.data.result;if(productIds.length>0){// Fetching product details\nconst responseItems=await axios.post('https://api.valantis.store:41000/',{action:'get_items',params:{ids:productIds}},{headers:{'X-Auth':authString()}});const uniqueProducts=getUniqueProducts(responseItems.data.result);const filteredProducts=applyFilters(uniqueProducts,filters);setProducts(filteredProducts);setTotalPages(Math.ceil(filteredProducts.length/10));}else{setProducts([]);setTotalPages(1);}}catch(error){var _error$response,_error$response$data;console.error('Error fetching products:',((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.result)||error.message);}};const getUniqueProducts=products=>{const uniqueIds=new Set();return products.filter(product=>{if(!uniqueIds.has(product.id)){uniqueIds.add(product.id);return true;}return false;});};const applyFilters=(products,filters)=>{return products.filter(product=>{return(!filters.name||product.product.toLowerCase().includes(filters.name.toLowerCase()))&&(!filters.price||product.price===filters.price)&&(!filters.brand||product.brand===filters.brand);});};useEffect(()=>{fetchProducts(currentPage);},[currentPage]);const handlePageChange=page=>{setCurrentPage(page);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Product List\"}),/*#__PURE__*/_jsx(ProductList,{products:products}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:handlePageChange})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","CryptoJS","axios","ProductList","Pagination","jsx","_jsx","jsxs","_jsxs","App","products","setProducts","currentPage","setCurrentPage","totalPages","setTotalPages","getTimestamp","currentDate","Date","timestamp","toISOString","slice","replace","authString","MD5","concat","toString","fetchProducts","page","arguments","length","undefined","filters","responseIds","post","action","params","offset","limit","headers","productIds","data","result","responseItems","ids","uniqueProducts","getUniqueProducts","filteredProducts","applyFilters","Math","ceil","error","_error$response","_error$response$data","console","response","message","uniqueIds","Set","filter","product","has","id","add","name","toLowerCase","includes","price","brand","handlePageChange","children","onPageChange"],"sources":["C:/Users/user/Desktop/valantis/test/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport CryptoJS from 'crypto-js'\r\nimport axios from 'axios'\r\nimport ProductList from './components/ProductList'\r\nimport Pagination from './components/Pagination'\r\n\r\nconst App = () => {\r\n\tconst [products, setProducts] = useState([])\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\tconst [totalPages, setTotalPages] = useState(1)\r\n\r\n\tconst getTimestamp = () => {\r\n\t\tconst currentDate = new Date()\r\n\t\tconst timestamp = currentDate.toISOString().slice(0, 10).replace(/-/g, '')\r\n\t\treturn timestamp\r\n\t}\r\n\r\n\tconst authString = () => {\r\n\t\tconst timestamp = getTimestamp()\r\n\t\treturn CryptoJS.MD5(`Valantis_${timestamp}`).toString()\r\n\t}\r\n\r\n\tconst fetchProducts = async (page = 1, filters = {}) => {\r\n\t\ttry {\r\n\t\t\t// Fetching product IDs\r\n\t\t\tconst responseIds = await axios.post(\r\n\t\t\t\t'https://api.valantis.store:41000/',\r\n\t\t\t\t{\r\n\t\t\t\t\taction: 'get_ids',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\toffset: (page - 1) * 50,\r\n\t\t\t\t\t\tlimit: 50,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'X-Auth': authString(),\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t)\r\n\r\n\t\t\tconst productIds = responseIds.data.result\r\n\r\n\t\t\tif (productIds.length > 0) {\r\n\t\t\t\t// Fetching product details\r\n\t\t\t\tconst responseItems = await axios.post(\r\n\t\t\t\t\t'https://api.valantis.store:41000/',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taction: 'get_items',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tids: productIds,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'X-Auth': authString(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\r\n\t\t\t\tconst uniqueProducts = getUniqueProducts(responseItems.data.result)\r\n\t\t\t\tconst filteredProducts = applyFilters(uniqueProducts, filters)\r\n\r\n\t\t\t\tsetProducts(filteredProducts)\r\n\t\t\t\tsetTotalPages(Math.ceil(filteredProducts.length / 10))\r\n\t\t\t} else {\r\n\t\t\t\tsetProducts([])\r\n\t\t\t\tsetTotalPages(1)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\r\n\t\t\t\t'Error fetching products:',\r\n\t\t\t\terror.response?.data?.result || error.message\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst getUniqueProducts = products => {\r\n\t\tconst uniqueIds = new Set()\r\n\t\treturn products.filter(product => {\r\n\t\t\tif (!uniqueIds.has(product.id)) {\r\n\t\t\t\tuniqueIds.add(product.id)\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t})\r\n\t}\r\n\r\n\tconst applyFilters = (products, filters) => {\r\n\t\treturn products.filter(product => {\r\n\t\t\treturn (\r\n\t\t\t\t(!filters.name ||\r\n\t\t\t\t\tproduct.product.toLowerCase().includes(filters.name.toLowerCase())) &&\r\n\t\t\t\t(!filters.price || product.price === filters.price) &&\r\n\t\t\t\t(!filters.brand || product.brand === filters.brand)\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchProducts(currentPage)\r\n\t}, [currentPage])\r\n\r\n\tconst handlePageChange = page => {\r\n\t\tsetCurrentPage(page)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Product List</h1>\r\n\t\t\t<ProductList products={products} />\r\n\t\t\t<Pagination\r\n\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\ttotalPages={totalPages}\r\n\t\t\t\tonPageChange={handlePageChange}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default App\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}